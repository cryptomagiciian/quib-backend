# Lovable Cloud Environment Variables Setup

## üîß **Lovable Cloud Environment Variables**

In your Lovable project dashboard, go to **Settings** ‚Üí **Environment Variables** and add these:

### **Required Variables:**

```env
# Your Cursor Backend Configuration
CURSOR_BACKEND_URL=http://localhost:3000
CURSOR_BACKEND_JWT_SECRET=your-super-secret-jwt-key-here

# Supabase Configuration (auto-generated by Lovable)
SUPABASE_URL=your-supabase-url
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
```

### **Development vs Production:**

**Development:**
```env
CURSOR_BACKEND_URL=http://localhost:3000
CURSOR_BACKEND_JWT_SECRET=dev-jwt-secret-key
```

**Production:**
```env
CURSOR_BACKEND_URL=https://your-quib-backend.vercel.app
CURSOR_BACKEND_JWT_SECRET=production-jwt-secret-key
```

## üîê **Your Cursor Backend Environment Variables**

In your Cursor backend `.env` file, you still need:

```env
# Database (you can use Supabase PostgreSQL or keep your own)
DATABASE_URL="postgresql://username:password@localhost:5432/quib_db"

# JWT (should match CURSOR_BACKEND_JWT_SECRET in Lovable)
JWT_SECRET="your-super-secret-jwt-key-here"

# OpenAI (CRITICAL - powers AI features)
OPENAI_API_KEY="your-openai-api-key"

# Token Contract (optional for testing)
TOKEN_CONTRACT_ADDRESS="0x..."

# BNB Chain (optional)
BNB_RPC_URL="https://bsc-dataseed.binance.org/"
BNB_CHAIN_ID=56
TOKEN_DECIMALS=18

# Development
NODE_ENV="development"
PORT=3000
```

## üöÄ **Quick Setup Steps:**

### **1. Enable Lovable Cloud**
- Go to your Lovable project
- Navigate to Settings ‚Üí Lovable Cloud
- Click "Enable Lovable Cloud"
- Note down the Supabase URL and keys

### **2. Set Environment Variables in Lovable**
- Go to Settings ‚Üí Environment Variables
- Add the variables listed above
- Make sure `CURSOR_BACKEND_URL` points to your running backend

### **3. Deploy Edge Functions**
- Upload the edge functions from `lovable-edge-functions/` folder
- Deploy them to your Lovable project

### **4. Run Database Schema**
- Go to your Supabase dashboard
- Navigate to SQL Editor
- Run the SQL from `lovable-cloud-schema.sql`

### **5. Start Your Cursor Backend**
```bash
cd quib-backend
npm run dev
```

### **6. Test the Integration**
- Open your Lovable frontend
- Register a new user
- Your Quib should be created automatically!

## üîÑ **Data Flow:**

1. **User registers** ‚Üí Lovable Cloud (Supabase auth)
2. **Creature creation** ‚Üí Edge function calls your Cursor backend
3. **Chat messages** ‚Üí Edge function ‚Üí Cursor backend (AI) ‚Üí Supabase storage
4. **Task completion** ‚Üí Edge function ‚Üí Cursor backend (XP calculation) ‚Üí Supabase storage
5. **Real-time updates** ‚Üí Supabase real-time subscriptions

## üéØ **Benefits of This Architecture:**

- **Lovable handles**: Auth, database, real-time, hosting
- **Your backend handles**: AI, personality, evolution logic
- **Clean separation**: Frontend/database vs AI/game logic
- **Scalable**: Each service can scale independently
- **Cost-effective**: Use Lovable's free tier + your backend

## üêõ **Troubleshooting:**

### **Edge Function Errors:**
- Check environment variables in Lovable
- Verify Cursor backend is running
- Check CORS settings

### **Database Errors:**
- Run the SQL schema in Supabase
- Check RLS policies
- Verify user authentication

### **Backend Connection Errors:**
- Ensure CURSOR_BACKEND_URL is correct
- Check JWT_SECRET matches
- Verify backend is accessible

---

**Your hybrid architecture is now ready!** üêâ‚ú®
